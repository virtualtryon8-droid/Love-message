<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Do you love me? â€” Surprise</title>
  <style>
    :root{
      --muted: #7b7b7b;
      --yes-grad: linear-gradient(180deg,#ff3b6b,#ff7b98);
      --card-bg: linear-gradient(180deg,#fff,#fff);
      --dark-1: #040006;
      --dark-2: #1a0a22;
      --text-light: #fff6fb;
    }

    /* Reset & layout */
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
    body{
      display:flex;
      align-items:center;
      justify-content:center;
      background: radial-gradient(900px 400px at 10% 10%, rgba(255,80,120,0.04) 0%, transparent 20%),
                  linear-gradient(180deg,#faf7fb,#fff);
      padding:24px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* View container (single-file "pages") */
    .view {
      width:100%;
      max-width:980px;
      border-radius:18px;
      overflow:hidden;
      position:relative;
      box-shadow:0 18px 60px rgba(20,12,40,0.08);
      background:var(--card-bg);
    }

    /* --- Home / Question view --- */
    #home {
      padding:48px;
      text-align:center;
    }

    #home h1{
      margin:0;
      font-size:clamp(28px,6vw,64px);
      color:#222;
      user-select:none;
    }

    .controls{
      margin-top:36px;
      position:relative;
      height:160px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    button{
      border:0;
      cursor:pointer;
      border-radius:12px;
      font-weight:800;
      box-shadow: 0 10px 28px rgba(20,12,40,0.06);
      user-select:none;
    }

    #yes{
      font-size:clamp(18px,3vw,36px);
      padding:18px 44px;
      background: var(--yes-grad);
      color:white;
      margin-right:36px;
    }
    #yes:active{ transform: scale(.98); }

    #no{
      position:absolute;
      width:72px;
      height:36px;
      font-size:14px;
      padding:6px 8px;
      background:#222;
      color:#ddd;
      right:calc(50% - 36px);
      top:62px;
      transition: left .12s ease, top .12s ease, transform .08s ease;
      will-change: left, top, transform;
    }

    /* --- Fullscreen dark view (hidden by default) --- */
    #love {
      position:fixed;
      inset:0;
      display:none;               /* hidden initially */
      align-items:center;
      justify-content:center;
      flex-direction:column;
      z-index:9999;
      background: radial-gradient(1200px 500px at 15% 10%, rgba(255,80,140,0.03), transparent 12%),
                  linear-gradient(180deg,var(--dark-1), var(--dark-2));
      color:var(--text-light);
      overflow:hidden;
      padding: 6vh 4vw;
      box-sizing: border-box;
    }

    /* Only the two big lines are included in the dark view */
    #love .center {
      text-align:center;
      z-index:6;
      pointer-events:none;
      user-select:none;
    }

    #love h1{
      margin:0;
      font-weight:900;
      font-size:clamp(34px,9.5vw,120px);
      letter-spacing:4px;
      color:var(--text-light);
      text-shadow: 0 18px 40px rgba(0,0,0,0.7), 0 0 28px rgba(255,80,140,0.04);
      line-height:1;
      transform: translateY(-2vh);
      white-space:pre-line; /* allow line breaks if needed */
    }

    #love .sub {
      margin-top:12px;
      font-weight:800;
      color:#ffd8ea;
      font-size:clamp(20px,3.6vw,40px);
      pointer-events:none;
    }

    /* falling items */
    .falling {
      position:absolute;
      inset:0;
      z-index:2;
      pointer-events:none;
      overflow:hidden;
    }

    .item {
      position:absolute;
      top:-14vh;
      will-change: transform, opacity;
      filter: drop-shadow(0 12px 18px rgba(0,0,0,0.6));
      opacity:0;
      animation-name:fall;
      animation-timing-function: linear;
      animation-iteration-count: 1;
    }

    @keyframes fall {
      0%   { transform: translateY(-14vh) translateX(0) rotate(0deg) scale(.85); opacity:0; }
      6%   { opacity:1; }
      84%  { opacity:1; }
      100% { transform: translateY(120vh) translateX(var(--drift)) rotate(var(--rot)) scale(1); opacity:0; }
    }

    .glow {
      position:absolute;
      inset:0;
      z-index:3;
      pointer-events:none;
      background:
        radial-gradient(420px 260px at 10% 78%, rgba(255,40,120,0.04), transparent 12%),
        radial-gradient(520px 300px at 92% 14%, rgba(120,70,180,0.03), transparent 12%);
      mix-blend-mode:screen;
    }

    /* Hide any text outside the big messages in the dark view (no back button, no small text) */
    /* small screens */
    @media (max-width:520px){
      .controls{ height:200px; }
      #no{ width:64px; height:38px; font-size:13px;}
      #yes{ padding:14px 30px; }
      #love h1 { font-size: clamp(26px, 12vw, 72px); letter-spacing:2px; }
    }
  </style>
</head>
<body>
  <!-- HOME VIEW -->
  <section id="home" class="view" role="main" aria-labelledby="qTitle">
    <h1 id="qTitle">Do you love me?</h1>

    <div class="controls" id="controls" aria-hidden="false">
      <button id="yes" aria-label="Yes, open the surprise">YES</button>
      <button id="no" aria-label="No (try to click me)">No</button>
    </div>
    <!-- NOTE: hint/extra text removed as requested -->
  </section>

  <!-- LOVE / DARK VIEW (hidden until YES is clicked) -->
  <section id="love" aria-hidden="true" aria-live="polite">
    <div class="falling" id="falling" aria-hidden="true"></div>
    <div class="glow" aria-hidden="true"></div>

    <div class="center" id="loveText">
      <h1>I KNOW YOU LOVE ME
LOVE YOU TOO, DARLING</h1>
      <!-- No subtext, no back button â€” only the big messages -->
    </div>
  </section>

  <script>
    (function () {
      // Home elements
      const home = document.getElementById('home');
      const yes = document.getElementById('yes');
      const no = document.getElementById('no');
      const controls = document.getElementById('controls');

      // Love elements
      const love = document.getElementById('love');
      const falling = document.getElementById('falling');

      /* -------------------------
         Dodging "No" button logic
         ------------------------- */
      function placeNoInitial(){
        const cRect = controls.getBoundingClientRect();
        const noRect = no.getBoundingClientRect();
        const startLeft = (cRect.width/2) + 40;
        const startTop = (cRect.height/2) - (noRect.height/2);
        no.style.left = startLeft + 'px';
        no.style.top = startTop + 'px';
      }
      placeNoInitial();
      window.addEventListener('resize', placeNoInitial);

      function moveNoAway(ev){
        const containerRect = controls.getBoundingClientRect();
        const noRect = no.getBoundingClientRect();
        const yesRect = yes.getBoundingClientRect();

        const maxAttempts = 80;
        let newLeft = 0, newTop = 0;
        for (let i = 0; i < maxAttempts; i++){
          const x = Math.random() * (containerRect.width - noRect.width);
          const y = Math.random() * (containerRect.height - noRect.height);
          const cx = containerRect.left + x + noRect.width/2;
          const cy = containerRect.top + y + noRect.height/2;
          const yesCx = yesRect.left + yesRect.width/2;
          const yesCy = yesRect.top + yesRect.height/2;
          const distYes = Math.hypot(cx - yesCx, cy - yesCy);

          let avoidPointer = 9999;
          if (ev && (ev.clientX || (ev.touches && ev.touches[0]))){
            const px = ev.clientX || (ev.touches && ev.touches[0] && ev.touches[0].clientX) || -9999;
            const py = ev.clientY || (ev.touches && ev.touches[0] && ev.touches[0].clientY) || -9999;
            avoidPointer = Math.hypot(cx - px, cy - py);
          }

          if (distYes > 140 && avoidPointer > 80){
            newLeft = x;
            newTop = y;
            break;
          }
          if (i === maxAttempts - 1){
            newLeft = x;
            newTop = y;
          }
        }

        no.style.left = Math.max(6, newLeft) + 'px';
        no.style.top = Math.max(6, newTop) + 'px';
        no.style.transform = `rotate(${(Math.random()*20-10)}deg)`;
      }

      no.addEventListener('mouseenter', moveNoAway);
      no.addEventListener('mousemove', moveNoAway);
      no.addEventListener('mousedown', function(ev){ ev.preventDefault(); moveNoAway(ev); });
      no.addEventListener('touchstart', function(ev){ ev.preventDefault(); moveNoAway(ev.touches && ev.touches[0]); }, {passive:false});
      controls.addEventListener('mousemove', function(ev){
        const noRect = no.getBoundingClientRect();
        const dx = ev.clientX - (noRect.left + noRect.width/2);
        const dy = ev.clientY - (noRect.top + noRect.height/2);
        const dist = Math.hypot(dx,dy);
        if (dist < 140) moveNoAway(ev);
      });
      no.addEventListener('click', function(){
        no.animate([
          { transform: 'translateX(0)' },
          { transform: 'translateX(-8px)' },
          { transform: 'translateX(8px)' },
          { transform: 'translateX(0)' }
        ], { duration: 420, iterations: 1 });
        setTimeout(() => moveNoAway(), 220);
      });

      /* -------------------------
         Show the dark full-screen view
         ------------------------- */
      yes.addEventListener('click', function showLoveView() {
        // Hide home view entirely and reveal the full-screen dark view.
        home.style.display = 'none';
        love.style.display = 'flex';
        love.setAttribute('aria-hidden', 'false');

        // Start the rain effect
        startRain();

        // Prevent double-binding if user clicks again
        yes.removeEventListener('click', showLoveView);
      });
      yes.addEventListener('keyup', function(e){ if (e.key === 'Enter' || e.key === ' ') yes.click(); });

      /* -------------------------
         Falling hearts & flowers
         ------------------------- */
      const POOLS = ['ðŸ’–','ðŸ’•','â¤ï¸','â£ï¸','ðŸŒ¸','ðŸŒº','ðŸŒ·','ðŸŒ¹','ðŸ’','ðŸŒ¼'];
      let rainInterval = null;
      let running = false;

      function createItem(char) {
        const el = document.createElement('div');
        el.className = 'item';
        el.textContent = char || POOLS[Math.floor(Math.random()*POOLS.length)];
        el.style.left = (Math.random()*100) + '%';
        const size = (14 + Math.random()*56);
        el.style.fontSize = size + 'px';
        const drift = (Math.random()*80 - 40).toFixed(2) + 'vw';
        el.style.setProperty('--drift', drift);
        const rot = (Math.random()*720 - 360).toFixed(2) + 'deg';
        el.style.setProperty('--rot', rot);
        const dur = (3 + Math.random()*9).toFixed(2) + 's';
        el.style.animationDuration = dur;
        el.style.animationDelay = (Math.random()*1.2).toFixed(2) + 's';
        el.style.transform = `rotate(${(Math.random()*40-20).toFixed(1)}deg)`;
        falling.appendChild(el);
        el.addEventListener('animationend', ()=> el.remove());
      }

      function spawnBurst(count) {
        for (let i=0;i<count;i++) createItem();
      }

      function startRain() {
        if (running) return;
        running = true;
        spawnBurst(36);
        rainInterval = setInterval(()=>{
          spawnBurst(6 + Math.floor(Math.random()*12));
        }, 600);
      }

      // Click inside love view to create a burst (no other UI elements to ignore)
      love.addEventListener('click', function(e){
        const burstCount = 26;
        for (let i=0;i<burstCount;i++){
          const b = document.createElement('div');
          b.className = 'item';
          b.textContent = POOLS[Math.floor(Math.random()*POOLS.length)];
          const x = Math.min(Math.max((e.clientX / window.innerWidth) * 100 + (Math.random()*12-6), 3), 97);
          b.style.left = x + '%';
          b.style.fontSize = (18 + Math.random()*44) + 'px';
          b.style.setProperty('--drift', ((Math.random()*80-40)).toFixed(2) + 'vw');
          b.style.setProperty('--rot', ((Math.random()*720)-360).toFixed(2) + 'deg');
          b.style.animationDuration = (1.2 + Math.random()*2.8).toFixed(2) + 's';
          b.style.animationDelay = '0s';
          falling.appendChild(b);
          b.addEventListener('animationend', ()=> b.remove());
        }
      });

      // Ensure things are placed when the page first loads
      setTimeout(placeNoInitial, 80);

      // Cleanup on unload
      window.addEventListener('beforeunload', ()=> {
        if (rainInterval) clearInterval(rainInterval);
      });
    })();
  </script>
</body>
</html>
